---
title: "qmd_script_presentation"
author: "Guo Hao"
format: 
  html:
    code-fold: True
editor: visual
---

# dplyr package presentation

## 多行并一行

```{r, warning=FALSE, message=FALSE}
library(dplyr)
library(openxlsx)
expr <- read.xlsx("./工作簿1.xlsx")
head(expr)
expr %>% 
  group_by(id) %>% 
  summarise(across(everything(), \(.x) paste(.x, collapse = ";")))
```

```{r}
# 另一种方法
expr %>% split(f = expr$id) %>% 
  lapply(\(.x){
   id = unique(.x[[1]])
   items = .x %>% dplyr::pull(items) %>% paste(collapse = ";")
   data <- data.frame(id = id, items = items)
   return(data)
  }) %>% do.call(rbind, .)
```
